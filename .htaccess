# Do not remove this line or mod_rewrite rules and search engine friendly URLs will stop working
RewriteBase /

<Files .htaccess>
order allow,deny
deny from all
</Files>

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(([^/]+/)*[^.]+)$ /$1.php [L]

# перекидываение c /index.php на /
RewriteCond %{REQUEST_URI}  !^/(?!admin[/]?).*
RewriteCond %{REQUEST_URI} ^/index(?:\.php)+$
RewriteCond %{QUERY_STRING} ^$
RewriteRule .+ / [R=301,N,L]

# перекидываение с /index.php?c=ID на /category-ID
RewriteCond %{REQUEST_URI} ^/index(?:\.php)+$
RewriteCond %{QUERY_STRING} c=(\d+)
RewriteRule .+ /shop/category-%1? [R=301,N,L]

# перекидываение с /index.php?c=ID на /category-ID
RewriteCond %{REQUEST_URI} ^/index(?:\.php)+$
RewriteCond %{QUERY_STRING} p=(\d+)
RewriteRule .+ /shop/product-%1? [R=301,N,L]

# перекидываение с /index.php?view=Page на /info/Page
RewriteCond %{REQUEST_URI} ^/index(?:\.php)+$
RewriteCond %{QUERY_STRING} view=(\W+)
RewriteRule .+ /info/%1? [R=301,N,L]

# перекидываение с /index.php?user=Page на /user/Page
RewriteCond %{REQUEST_URI} ^/index(?:\.php)+$
RewriteCond %{QUERY_STRING} user=(\W+)
RewriteRule .+ /user/%1? [R=301,N,L]

# перекидываение с /index.php?search=Query на /search/Query
RewriteCond %{REQUEST_URI} ^/index(?:\.php)+$
RewriteCond %{QUERY_STRING} search=(\W+)
RewriteRule .+ /search/%1? [R=301,N,L]

# перекидываение с /index.php?order=Page на /order/Page
RewriteCond %{REQUEST_URI} ^/index(?:\.php)+$
RewriteCond %{QUERY_STRING} order=(\W+)
RewriteRule .+ /order/%1? [R=301,N,L]

# корень магазина
RewriteRule ^shop(?:\.php)?$ /shop/ [R=301,N,L]
RewriteRule ^shop/$ /shopController.php [L]
# категория в магазине
RewriteRule ^shop/category-(\d+)/$ /shop/category-$1
RewriteRule ^shop/category-(\d+)$ /shopController.php?c=$1 [QSA,L]
# позиция в магазине
RewriteRule ^shop/product-(\d+)/$ /shop/product-$1
RewriteRule ^shop/product-(\d+)$ /shopController.php?p=$1 [QSA,L]

RewriteRule ^info/([^/]*)/$ /info/$1
RewriteRule ^info/([^/]*)$ /index.php?view=$1 [QSA,L]

RewriteRule ^user/([^/]*)/$ /user/$1
RewriteRule ^user/([^/]*)$ /index.php?user=$1 [QSA,L]

RewriteRule ^search/([^/]*)/$ /search/$1
RewriteRule ^search/([^/]*)$ /index.php?search=$1 [QSA,L]

RewriteRule ^order/([^/]*)/$ /order/$1
RewriteRule ^order/([^/]*)$ /index.php?order=$1 [QSA,L]